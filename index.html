<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Youtube API Demo - Metadata</title>
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<script type="text/javascript" src="https://apis.google.com/js/client.js?onload=onJSClientLoad"></script>
	</head>
	<body>
		<div id="search">
			<label for="id">Youtube Link</label>
			<br>
			<input type="url" name="id" id="yt-link">
			
			<button id="submit" class="submit-button">Get Metadata!</button>
		</div>
		<div id="result"></div>
		
		
		<script>
			$("#search #submit").click(function() {
				var params = $("#yt-link").val().split("?")[1].split("&");
				
				for (var i = 0; i < params.length; i++) {
					var pair = params[i].split("=");
					
					if (pair[0] === "v")
						window.location.href = window.location.pathname + "?id=" + pair[1];
				}
			});
			
			var QueryString = function () {
				// This function is anonymous, is executed immediately and 
				// the return value is assigned to QueryString!
				var query = window.location.search.substring(1);
				if (query.length === 0)
					return -1;
					
				var params = query.split("&")[0].split("=");
				return params[1];
			}();
			
			if (QueryString !== -1) {
				var id = QueryString;
				
				$.getJSON("https://www.googleapis.com/youtube/v3/videos?id=" + id + "&key=AIzaSyCT-H4kZUWkVAY1893PP7S63dmd1-rhR_g%20&fields=items(id,snippet(publishedAt,channelId,title,channelTitle,tags,categoryId),statistics)&part=snippet,statistics", function(data) {
					$("#result").append('<pre>' + JSON.stringify(data.items[0], null, 4) + '</pre>');
				});
			}
		</script>
	</body>
</html>